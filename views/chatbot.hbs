<!DOCTYPE html>
<html>
<head>
  <title>Chatbot</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <style>
    .navbar {
      background-color: #333;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 999;
      overflow: hidden;
    }

    .navbar a {
      float: left;
      display: block;
      color: #f2f2f2;
      text-align: center;
      padding: 9px 6px;
      text-decoration: none;
      font-size: 17px;
      transition: background-color 0.3s ease;
    }

    .navbar a:hover {
      background-color: #ddd;
      color: black;
    }

    .navbar .brand {
      font-size: 24px;
      font-weight: bold;
    }

    .navbar .brand span {
      animation: pulse 2s infinite;
    }

    .chat-container {
      width: 400px;
      margin: 90px auto;
      border: 3px solid #ccc;
      padding: 20px;
      border-radius: 5px;
    }

    .message {
      margin-bottom: 10px;
    }

    .user-message {
      color: blue;
    }

    .bot-message {
      color: green;
    }

    .input-group {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <a class="brand" href="/">Mi <span>Servidor</span></a>
    <a href="/">Home</a>
    <a href="/products">Products</a>
    <a href="/new_product">New Product</a>
    <a href="/chatbot">Chat</a>
    <button id="cartButton">Carrito</button>
  </nav>

  <div class="container">
    <div class="chat-container">
      <div class="messages">
        <div class="message user-message">User: ¡Hola! ¿En qué puedo ayudarte?</div>
        <div class="message bot-message">Bot: Bienvenido al chatbot. Soy un bot de ejemplo.</div>
      </div>
      <div class="input-group">
        <input type="text" class="form-control" id="userInput" placeholder="Escribe tu mensaje">
        <button class="btn btn-primary" id="sendButton">Enviar</button>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    $(document).ready(function() {
      var userInput = $("#userInput");
      var sendButton = $("#sendButton");
      var messages = $(".messages");

      function addMessage(message, sender) {
        var className = sender === "user" ? "user-message" : "bot-message";
        var messageElement = $("<div></div>").addClass("message").addClass(className).text(message);
        messages.append(messageElement);
      }

      sendButton.click(function() {
        var userMessage = userInput.val().trim();
        if (userMessage !== "") {
          addMessage("User: " + userMessage, "user");
          userInput.val("");

          fetch("/chatbot", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ message: userMessage })
          })
          .then((response) => response.json())
          .then((data) => {
            addMessage("Bot: " + data.response, "bot");
          })
          .catch((error) => {
            console.error("Error:", error);
          });
        }
      });
    });
  </script>

  <script>
    document.getElementById("cartButton").addEventListener("click", function() {
      window.location.href = "/carts";
    });
  </script>
</body>
</html>
